!function(){"use strict";var t=function(){this.enableCancel=!1,this.enableSubmit=!1};t.prototype.setup=function(){var t,a=GlobalVariables.appointments_unavailable;switch(GlobalVariables.dateFormat){case"DMY":t="dd/MM/yy";break;case"MDY":t="MM/dd/yy";break;case"YMD":t="yy/MM/dd";break;default:throw new Error("Invalid GlobalVariables.dateFormat value.")}$(".holydays tbody").empty();var e="regular"===GlobalVariables.timeFormat?"h:mm":"HH:mm";$.each(a,function(a,n){$("<tr/>",{html:[$("<td/>",{class:"holyday-name editable",text:n.notes}),$("<td/>",{class:"holyday-doctor-name editable",text:n.provider.first_name+" "+n.provider.last_name}),$("<td/>",{class:"holyday-start editable",text:Date.parse(n.start_datetime).toString(t+" "+e).toUpperCase()}),$("<td/>",{class:"holyday-end editable",text:Date.parse(n.end_datetime).toString(t+" "+e).toUpperCase()}),$("<td/>",{html:[$("<button/>",{type:"button",class:"btn btn-outline-secondary btn-sm edit-holyday",title:EALang.edit,html:[$("<span/>",{class:"fas fa-edit"})]}),$("<button/>",{type:"button",class:"btn btn-outline-secondary btn-sm delete-holyday",title:EALang.delete,html:[$("<span/>",{class:"fas fa-trash-alt"})]}),$("<button/>",{type:"button",class:"btn btn-outline-secondary btn-sm save-holyday d-none",title:EALang.save,html:[$("<span/>",{class:"fas fa-check-circle"})]}),$("<button/>",{type:"button",class:"btn btn-outline-secondary btn-sm cancel-holyday d-none",title:EALang.cancel,html:[$("<span/>",{class:"fas fa-ban"})]})]})]}).appendTo(".holydays tbody")}.bind(this)),this.editableHolyDayNameCell($(".holyday-name")),this.editableHolyDayDoctorNameCell($(".holyday-doctor-name")),this.editableDateTimeCell($(".holyday-start, .holyday-end"))},t.prototype.setupHolydaysExceptions=function(t){for(var a in t){var e=t[a];this.renderWorkingPlanExceptionRow(a,e).appendTo(".holydays tbody")}},t.prototype.editableHolyDayNameCell=function(t){t.editable(function(t,a){return t},{type:"text",data:"",event:"edit",height:"30px",submit:'<button type="button" class="d-none submit-editable">Submit</button>',cancel:'<button type="button" class="d-none cancel-editable">Cancel</button>',onblur:"ignore",onreset:function(t,a){if(!this.enableCancel)return!1}.bind(this),onsubmit:function(t,a){if(!this.enableSubmit)return!1}.bind(this)})},t.prototype.editableHolyDayDoctorNameCell=function(t){var a=[];a[0]=EALang.all,GlobalVariables.providers.forEach(function(t,e){a[t.id]=t.first_name+" "+t.last_name}),t.editable(function(t,a){return t},{type:"select",selected:0,data:a,event:"edit",height:"30px",submit:'<button type="button" class="d-none submit-editable">Submit</button>',cancel:'<button type="button" class="d-none cancel-editable">Cancel</button>',onblur:"ignore",onreset:function(t,a){if(!this.enableCancel)return!1}.bind(this),onsubmit:function(t,a){if(!this.enableSubmit)return!1}.bind(this)})},t.prototype.editableDateTimeCell=function(t){t.editable(function(t,a){return t},{event:"edit",height:"30px",submit:$("<button/>",{type:"button",class:"d-none submit-editable",text:EALang.save}).get(0).outerHTML,cancel:$("<button/>",{type:"button",class:"d-none cancel-editable",text:EALang.cancel}).get(0).outerHTML,onblur:"ignore",onreset:function(t,a){if(!this.enableCancel)return!1}.bind(this),onsubmit:function(t,a){if(!this.enableSubmit)return!1}.bind(this)})},t.prototype.bindEventHandlers=function(){$(".add-holyday").on("click",function(){var t,a="regular"===GlobalVariables.timeFormat?"h:mm":"HH:mm";switch(GlobalVariables.dateFormat){case"DMY":t="dd/MM/yy";break;case"MDY":t="MM/dd/yy";break;case"YMD":t="yy/MM/dd";break;default:throw new Error("Invalid GlobalVariables.dateFormat value.")}var e=$("<tr/>",{html:[$("<td/>",{class:"holyday-name editable",text:""}),$("<td/>",{class:"holyday-doctor-name editable",text:EALang.all}),$("<td/>",{class:"holyday-start editable",text:Date.parse(new Date).toString(t+"TT"+a)}),$("<td/>",{class:"holyday-end editable",text:Date.parse(new Date).toString(t+"TT"+a)}),$("<td/>",{html:[$("<button/>",{type:"button",class:"btn btn-outline-secondary btn-sm edit-holyday",title:EALang.edit,html:[$("<span/>",{class:"fas fa-edit"})]}),$("<button/>",{type:"button",class:"btn btn-outline-secondary btn-sm delete-holyday",title:EALang.delete,html:[$("<span/>",{class:"fas fa-trash-alt"})]}),$("<button/>",{type:"button",class:"btn btn-outline-secondary btn-sm save-holyday d-none",title:EALang.save,html:[$("<span/>",{class:"fas fa-check-circle"})]}),$("<button/>",{type:"button",class:"btn btn-outline-secondary btn-sm cancel-holyday d-none",title:EALang.cancel,html:[$("<span/>",{class:"fas fa-ban"})]})]})]}).appendTo(".holydays tbody");this.editableHolyDayNameCell(e.find(".holyday-name")),this.editableHolyDayDoctorNameCell(e.find(".holyday-doctor-name")),this.editableDateTimeCell(e.find(".holyday-start, .holyday-end")),e.find(".edit-holyday").trigger("click"),$(".add-holyday").prop("disabled",!0)}.bind(this)),$(document).on("click",".edit-holyday",function(){var t,a=$(this).closest("table").find(".editable");switch(GlobalVariables.dateFormat){case"DMY":t="dd/MM/yy";break;case"MDY":t="MM/dd/yy";break;case"YMD":t="yy/MM/dd";break;default:throw new Error("Invalid GlobalVariables.dateFormat value.")}a.each(function(t,a){a.reset&&a.reset()}),$(this).parent().parent().children().trigger("edit"),$(this).parent().parent().find(".holyday-start input, .holyday-end input").datetimepicker({dayNames:[EALang.sunday,EALang.monday,EALang.tuesday,EALang.wednesday,EALang.thursday,EALang.friday,EALang.saturday],dayNamesShort:[EALang.sunday.substr(0,3),EALang.monday.substr(0,3),EALang.tuesday.substr(0,3),EALang.wednesday.substr(0,3),EALang.thursday.substr(0,3),EALang.friday.substr(0,3),EALang.saturday.substr(0,3)],dayNamesMin:[EALang.sunday.substr(0,2),EALang.monday.substr(0,2),EALang.tuesday.substr(0,2),EALang.wednesday.substr(0,2),EALang.thursday.substr(0,2),EALang.friday.substr(0,2),EALang.saturday.substr(0,2)],monthNames:[EALang.january,EALang.february,EALang.march,EALang.april,EALang.may,EALang.june,EALang.july,EALang.august,EALang.september,EALang.october,EALang.november,EALang.december],prevText:EALang.previous,nextText:EALang.next,currentText:EALang.now,closeText:EALang.close,dateFormat:t,timeFormat:"regular"===GlobalVariables.timeFormat?"h:mm":"HH:mm",timeOnlyTitle:EALang.select_time,timeText:EALang.time,hourText:EALang.hour,minuteText:EALang.minutes}),$(this).parent().parent().find(".holyday-name select").focus();var e=$(this).closest("tr");e.find(".edit-holyday, .delete-holyday").addClass("d-none"),e.find(".save-holyday, .cancel-holyday").removeClass("d-none"),e.find("select,input:text").addClass("form-control input-sm"),$(".add-holyday").prop("disabled",!0)}),$(document).on("click",".delete-holyday",function(){$(this).parent().parent().remove()}),$(document).on("click",".cancel-holyday",function(t){var a=t.target,e=$(a).closest("tr");this.enableCancel=!0,e.find(".cancel-editable").trigger("click"),this.enableCancel=!1,$(a).closest("table").find(".edit-holyday, .delete-holyday").removeClass("d-none"),e.find(".save-holyday, .cancel-holyday").addClass("d-none"),$(".add-holyday").prop("disabled",!1)}.bind(this)),$(document).on("click",".save-holyday",function(t){var a=t.target,e=$(a).closest("tr"),n=Date.parse(e.find(".holyday-start input").val());n>Date.parse(e.find(".holyday-end input").val())&&e.find(".holyday-end input").val(n.addHours(1).toString("regular"===GlobalVariables.timeFormat?"h:mm tt":"HH:mm")),this.enableSubmit=!0,e.find(".editable .submit-editable").trigger("click"),this.enableSubmit=!1,e.find(".save-holyday, .cancel-holyday").addClass("d-none"),$(a).closest("table").find(".edit-holyday, .delete-holyday").removeClass("d-none"),$(".add-holyday").prop("disabled",!1),this.setup()}.bind(this))},t.prototype.timepickers=function(t){var a;switch(t=t||!1,GlobalVariables.dateFormat){case"DMY":a="dd/MM/yy";break;case"MDY":a="MM/dd/yy";break;case"YMD":a="yy/MM/dd";break;default:throw new Error("Invalid GlobalVariables.dateFormat value.")}!1===t?$(".holydays input:text").datetimepicker({dayNames:[EALang.sunday,EALang.monday,EALang.tuesday,EALang.wednesday,EALang.thursday,EALang.friday,EALang.saturday],dayNamesShort:[EALang.sunday.substr(0,3),EALang.monday.substr(0,3),EALang.tuesday.substr(0,3),EALang.wednesday.substr(0,3),EALang.thursday.substr(0,3),EALang.friday.substr(0,3),EALang.saturday.substr(0,3)],dayNamesMin:[EALang.sunday.substr(0,2),EALang.monday.substr(0,2),EALang.tuesday.substr(0,2),EALang.wednesday.substr(0,2),EALang.thursday.substr(0,2),EALang.friday.substr(0,2),EALang.saturday.substr(0,2)],monthNames:[EALang.january,EALang.february,EALang.march,EALang.april,EALang.may,EALang.june,EALang.july,EALang.august,EALang.september,EALang.october,EALang.november,EALang.december],prevText:EALang.previous,nextText:EALang.next,closeText:EALang.close,dateFormat:a,timeFormat:"regular"===GlobalVariables.timeFormat?"h:mm":"HH:mm",currentText:EALang.now,timeOnlyTitle:EALang.select_time,timeText:EALang.time,hourText:EALang.hour,minuteText:EALang.minutes,onSelect:function(t,a){var e=Date.parse($(this).parent().parent().find(".holyday-start").val());e>Date.parse($(this).parent().parent().find(".hoylyday-end").val())&&$(this).parent().parent().find(".holyday-end").val(e.addHours(1).toString("regular"===GlobalVariables.timeFormat?"h:mm tt":"HH:mm"))}}):$(".holydays input").datetimepicker("destroy")},t.prototype.reset=function(){},window.Holydays=t}();