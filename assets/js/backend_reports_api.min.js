window.BackendReportsApi=window.BackendReportsApi||{},function(t){window.BackendReportsApi.getAppointmentsBySpecialities=function(t,e){var a=GlobalVariables.baseUrl+"/index.php/Backend_api/ajax_get_appointments_by_specialities",n={csrfToken:GlobalVariables.csrfToken,speciality_value:t,date_value:e};$.ajax({url:a,type:"GET",data:n,dataType:"json"}).done(function(t){t.length>0&&function(t){let e={};t.forEach(t=>{e.hasOwnProperty(t.speciality.name+" - "+t.doctor.last_name+" "+t.doctor.first_name)||(e[t.speciality.name+" - "+t.doctor.last_name+" "+t.doctor.first_name]={patients:[]}),e[t.speciality.name+" - "+t.doctor.last_name+" "+t.doctor.first_name].patients.push({name:t.patient.first_name,lastname:t.patient.last_name,clinical_story:t.patient.clinical_story,diagnostic:null==t.notes?"":t.notes,municipality:null==t.municipality?"":t.municipality,medical_center:null==t.medical_center?"":t.medical_center,doc_name:t.doctor.first_name,doc_last_name:t.doctor.last_name,start_datetime:t.start_datetime})});var a=new jsPDF("p","pt","letter");60,60;var n=30,i=30,o=40;Object.entries(e).forEach(([t,c])=>{a.setFont("helvetica"),a.setFontType("bold"),a.setFontSize(10),a.text(30,i,t),Object.entries(c).forEach(([t,e])=>{var i=e.length-1;e.forEach(t=>{if(a.setFont("courier"),a.setFontType("normal"),a.setFontSize(10),a.text(n,o,t.name+" "+t.lastname),a.text(n,o+10,t.clinical_story),a.text(n,o+20,t.start_datetime),a.text(n,o+30,t.diagnostic),a.text(n,o+40,t.municipality),a.text(n,o+50,t.medical_center),e.indexOf(t)<i){var c=n+200+5;c>552?(n=30,(o+=70)>=717&&(a.addPage(),o=30)):n=c}})}),nextYtittle=o,Object.entries(e).findIndex(e=>e.key===t)<Object.keys(e).length-1&&(nextYtittle>717?(a.addPage(),n=30,i=30,o=40):(i=o+=70,o+=10,n=30))});var c=a.output("bloburi");$(".preview-pane").attr("src",c)}(t)})}}();