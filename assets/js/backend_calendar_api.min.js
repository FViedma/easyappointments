window.BackendCalendarApi=window.BackendCalendarApi||{},function(a){"use strict";a.saveAppointment=function(a,n,e,i){var o=GlobalVariables.baseUrl+"/index.php/backend_api/ajax_save_appointment",t={csrfToken:GlobalVariables.csrfToken,appointment_data:JSON.stringify(a)};n&&(t.customer_data=JSON.stringify(n)),$.post(o,t).done(function(a){e&&e(a)}).fail(function(a,n,e){i&&i()})},a.saveUnavailable=function(a,n,e){var i=GlobalVariables.baseUrl+"/index.php/backend_api/ajax_save_unavailable",o={csrfToken:GlobalVariables.csrfToken,unavailable:JSON.stringify(a)};$.post(i,o).done(function(a){n&&n(a)}).fail(function(a,n,i){e&&e()})},a.saveWorkingPlanException=function(a,n,e,i,o){var t=GlobalVariables.baseUrl+"/index.php/backend_api/ajax_save_working_plan_exception",l={csrfToken:GlobalVariables.csrfToken,date:a,working_plan_exception:n,provider_id:e};$.post(t,l).done(function(a){i&&i(a)}).fail(function(a,n,e){o&&o()})},a.deleteWorkingPlanException=function(a,n,e,i){var o=GlobalVariables.baseUrl+"/index.php/backend_api/ajax_delete_working_plan_exception",t={csrfToken:GlobalVariables.csrfToken,date:a,provider_id:n};$.post(o,t).done(function(a){e&&e(a)}).fail(function(a,n,e){i&&i()})},a.getPatientByCI=function(a,n){var e=GlobalVariables.baseUrl+"/index.php/Backend_api/ajax_get_patient_by_ci",i={patientCI:a,complement:n};$.ajax({url:e,type:"GET",data:i,dataType:"json"}).done(function(n){if(null==n)$("#form-message").empty(),$("#appointment-message").empty(),$("#save-appointment").prop("disabled",!0),GeneralFunctions.displayMessageBox(EALang.message,EALang.patient_not_found);else if(n.length>0)for(var e=/[^0-9]+/,i=0;i<n.length;){if(n[i].HCL_NUMCI.replace(e,"")==a){$("#first-name").val(n[i].HCL_NOMBRE),$("#last-name").val(n[i].HCL_APPAT+" "+n[i].HCL_APMAT),$("#clinical-story").val(n[i].HCL_CODIGO),$("#save-appointment").prop("disabled",!1);break}i++}else $("#manage-appointment").find("#first-name, #last-name,#clinical-story").val("")})}}(window.BackendCalendarApi);